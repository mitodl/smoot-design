<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body>
    <div id="ai-chat-container"></div>
    <script type="module">
      import * as aiChat from "./static/bundles/aiChat.es.js"

      const requestOpts = {
        apiUrl: "https://api.rc.learn.mit.edu/ai/http/syllabus_agent/",
        transformBody: (messages) => {
          const body = {
            collection_name: "content_files",
            message: messages[messages.length - 1].content,
            course_id: "course-v1:xPRO+PCDEx",
          }
          return body
        },
      }

      aiChat.init(
        {
          requestOpts,
          entryScreenEnabled: false,
          askTimTitle: "About this Course",
          initialMessages: [
            {
              role: "assistant",
              content: "How can I help you today?",
            },
          ],
        },
        {
          container: document.getElementById("ai-chat-container"),
        },
      )
    </script>
  </body>
</html>
